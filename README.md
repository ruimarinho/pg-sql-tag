# pg-sql-tag

A [pg](https://github.com/brianc/node-postgres) plugin for [sql-tag](https://www.npmjs.com/package/sql-tag), combinining the elegance of tagged sql query strings with the convenience and safety of `pg.query`.

## Status

[![npm version][npm-image]][npm-url]
[![build status][travis-image]][travis-url]

## Installation

Install the package via `npm`:

```bash
$ npm install pg-sql-tag
```

## Usage

```js
var pg = require('pg');
var sql = require('sql-tag');

// Wrap `pg` in order to support queries
// generated by the `sql` tag.
require('pg-sql-tag')(pg);

// Use expressions inside placeholders to build elegant
// and readable queries.
pg.query(sql`SELECT * FROM "Foo" WHERE id = ${ 1 * 2 }`, function(err, result) {
  if (err) {
    throw err;
  }

  console.log(result);
});

// You can even use function calls inside expressions.
var obj = { foo: 'bar' }

pg.query(sql`UPDATE "Foo" SET biz = ${ JSON.stringify(obj) }`, function(err, result) {
  if (err) {
    throw err;
  }

  console.log(result);
});
```

## Tests

```
$ npm test
```

## License

MIT

[npm-image]: https://img.shields.io/npm/v/pg-sql-tag.svg
[npm-url]: https://www.npmjs.com/package/pg-sql-tag
[travis-image]: https://travis-ci.org/seegno/pg-sql-tag.svg
[travis-url]: https://travis-ci.org/seegno/pg-sql-tag
